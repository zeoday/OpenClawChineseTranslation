{
  "file": "src/commands/auth-choice.apply.api-providers.ts",
  "description": "胜算云认证流程 - 在 together-api-key 之前插入胜算云处理逻辑",
  "replacements": {
    "  applyXiaomiProviderConfig,\n  applyZaiConfig,": "  applyXiaomiProviderConfig,\n  applyShengsuanyunConfig,\n  applyShengsuanyunProviderConfig,\n  applyZaiConfig,",
    "setTogetherApiKey,": "setShengSuanYunApiKey,\n  setTogetherApiKey,",
    "  if (authChoice === \"together-api-key\") {\n    let hasCredential = false;\n\n    if (!hasCredential && params.opts?.token && params.opts?.tokenProvider === \"together\") {": "  if (authChoice === \"shengsuanyun-api-key\") {\n    const shengsuanyunDefaultModelRef = \"shengsuanyun/openai/gpt-4.1-nano\";\n    let hasCredential = false;\n\n    if (!hasCredential && params.opts?.token && params.opts?.tokenProvider === \"shengsuanyun\") {\n      await setShengSuanYunApiKey(normalizeApiKeyInput(params.opts.token), params.agentDir);\n      hasCredential = true;\n    }\n\n    if (!hasCredential) {\n      await params.prompter.note([\"胜算云是国内 API 聚合平台，获取密钥: https://shengsuanyun.com/?from=CH_4BVI0BM2\"].join(\"\\n\"), \"胜算云\");\n    }\n\n    const envKey = resolveEnvApiKey(\"shengsuanyun\");\n    if (envKey) {\n      const useExisting = await params.prompter.confirm({ message: `使用现有的 SHENGSUANYUN_API_KEY (${envKey.source}, ${formatApiKeyPreview(envKey.apiKey)})?`, initialValue: true });\n      if (useExisting) { await setShengSuanYunApiKey(envKey.apiKey, params.agentDir); hasCredential = true; }\n    }\n\n    if (!hasCredential) {\n      const key = await params.prompter.text({ message: \"输入胜算云 API 密钥\", validate: validateApiKeyInput });\n      await setShengSuanYunApiKey(normalizeApiKeyInput(String(key)), params.agentDir);\n    }\n\n    nextConfig = applyAuthProfileConfig(nextConfig, {\n      profileId: \"shengsuanyun:default\",\n      provider: \"shengsuanyun\",\n      mode: \"api_key\",\n    });\n    {\n      const applied = await applyDefaultModelChoice({\n        config: nextConfig,\n        setDefaultModel: params.setDefaultModel,\n        defaultModel: shengsuanyunDefaultModelRef,\n        applyDefaultConfig: applyShengsuanyunConfig,\n        applyProviderConfig: applyShengsuanyunProviderConfig,\n        noteDefault: shengsuanyunDefaultModelRef,\n        noteAgentModel,\n        prompter: params.prompter,\n      });\n      nextConfig = applied.config;\n      agentModelOverride = applied.agentModelOverride ?? agentModelOverride;\n    }\n    return { config: nextConfig, agentModelOverride };\n  }\n\n  if (authChoice === \"together-api-key\") {\n    let hasCredential = false;\n\n    if (!hasCredential && params.opts?.token && params.opts?.tokenProvider === \"together\") {"
  }
}
